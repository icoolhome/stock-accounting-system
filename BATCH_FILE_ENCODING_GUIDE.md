# Windows ?寡???隞嗡葉?楊蝣潭???

## ??
Windows ?寡???隞塚?.bat嚗??典隞斗?蝷箏??葉甇?Ⅱ憿舐內銝剜?嚗??蝙??**ANSI/GBK 蝺函Ⅳ**嚗???UTF-8??

## 閫?捱?寞?

### 雿輻 Node.js ??iconv-lite ?萄遣甇?Ⅱ蝺函Ⅳ????辣

**?甇仿?**嚗?
1. 雿輻 `server/node_modules/iconv-lite` 璅∠?
2. 撠?UTF-8 摮泵銝脰?? GBK 蝺函Ⅳ
3. 雿輻 `\r\n` 雿??蝚佗?Windows 璅?嚗?
4. 撖怠?辣?蝙??Buffer嚗??臬?蝚虫葡

**蝷箔?隞?Ⅳ**嚗?

```javascript
const fs = require('fs');
const iconv = require('./server/node_modules/iconv-lite');

// 皞??辣?批捆嚗蝙??\r\n 雿??蝚佗?
const lines = [
  '@echo off',
  'chcp 936 >nul 2>&1',
  'echo 銝剜??批捆',
  // ... ?游?銵?
];

const content = lines.join('\r\n') + '\r\n';

// 頧???GBK 蝺函Ⅳ
const gbkBuffer = iconv.encode(content, 'gbk');

// 撖怠?辣
fs.writeFileSync('start.bat', gbkBuffer);
```

## ??瘜冽?鈭?

1. **蝺函Ⅳ**嚗??蝙??GBK/GB2312 蝺函Ⅳ嚗 Windows 銝剜?蝟餌絞銝剖???ANSI
2. **??蝚?*嚗??蝙??`\r\n`嚗indows 璅?嚗?????`\n`
3. **?辣?**嚗溶??`chcp 936` 閮剔蔭隞?Ⅳ? GBK
4. **霈?游?**嚗蝙??`setlocal enabledelayedexpansion` ??`!var!` 隤???霈

## 撽??寞?

?辣?萄遣敺??典隞斗?蝷箏??葉??嚗?
```cmd
chcp 936
type start.bat
```

?府?賣迤蝣粹＊蝷箔葉?摰嫘?

## ?嗡??寞?

憒? Node.js ?寞?銝?剁??臭誑雿輻嚗?
- **Notepad++**嚗楊蝣???頧???ANSI 蝺函Ⅳ
- **閮???*嚗摮 ??蝺函Ⅳ?豢??NSI??
- **PowerShell**嚗蝙??`[System.Text.Encoding]::Default` 蝺函Ⅳ





